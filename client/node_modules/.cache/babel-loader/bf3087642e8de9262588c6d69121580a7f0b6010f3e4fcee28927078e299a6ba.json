{"ast":null,"code":"import request from '../../utils/request';\nimport { toast } from \"react-toastify\";\nimport { activityAction } from '../slices/activitySlice';\n\n// get activities\nexport function fetchActiviy() {\n  return async dispatch => {\n    try {\n      const {\n        data\n      } = await request.get(`api/activities`);\n      dispatch(activityAction.setActivities(data));\n      console.log(data);\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n//get activity count \nexport function getActivitiesCount() {\n  return async dispatch => {\n    try {\n      const {\n        data\n      } = await request.get(`api/activites/admin/count`);\n      dispatch(activityAction.setActivityCount(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n//create activity\nexport function createAcivity(newActivity) {\n  return async (dispatch, getState) => {\n    try {\n      dispatch(activityAction.setLoading());\n      await request.post(`api/activities/admin`, newActivity, {\n        headers: {\n          Authorization: \"Bearer \" + getState().auth.admin.data.token,\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      dispatch(activityAction.setIsActivityCreated()); //put it ro true\n      dispatch(fetchActiviy());\n      toast.success(\"activity created successfully\");\n      // after 2 seconsd we set it to false to return to the page\n      setTimeout(() => dispatch(activityAction.clearIsActivityCreated()), 2000); //2 second\n    } catch (error) {\n      console.log(error);\n      dispatch(activityAction.clearLoading());\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n//update activity picture \nexport function updateActivityPicture(newImage, ActivityId) {\n  return async (dispatch, getState) => {\n    try {\n      await request.put(`/api/activities/admin/update-image/${ActivityId}`, newImage, {\n        headers: {\n          Authorization: \"Bearer \" + getState().auth.admin.data.token,\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      toast.success(\"new activity image uploaded successfully\");\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n//update activity\nexport function updateActivity(newActivity, ActivitytId) {\n  return async (dispatch, getState) => {\n    try {\n      const {\n        data\n      } = await request.put(`api/activities/admin/${ActivitytId}`, newActivity, {\n        headers: {\n          Authorization: \"Bearer \" + getState().auth.admin.data.token\n        }\n      });\n      dispatch(activityAction.setActivity(data));\n      dispatch(fetchActiviy());\n      toast.success(\"activity updated successfully\");\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n//delete activity\nexport function deleteActiivty(ActivityId) {\n  return async (dispatch, getState) => {\n    try {\n      const {\n        data\n      } = await request.delete(`api/activities/admin/${ActivityId}`, {\n        headers: {\n          Authorization: \"Bearer \" + getState().auth.admin.data.token\n        }\n      });\n      dispatch(activityAction.deleteActivity(data.ActivityId));\n      dispatch(fetchActiviy());\n      toast.success(\"activity deleted successfully\");\n    } catch (error) {\n      toast.error(error.response.data.message);\n      console.log(error);\n    }\n  };\n}","map":{"version":3,"names":["request","toast","activityAction","fetchActiviy","dispatch","data","get","setActivities","console","log","error","response","message","getActivitiesCount","setActivityCount","createAcivity","newActivity","getState","setLoading","post","headers","Authorization","auth","admin","token","setIsActivityCreated","success","setTimeout","clearIsActivityCreated","clearLoading","updateActivityPicture","newImage","ActivityId","put","updateActivity","ActivitytId","setActivity","deleteActiivty","delete","deleteActivity"],"sources":["/home/chaden/Téléchargements/ttour-main/client/src/redux/apiCalls/activityApiCall.js"],"sourcesContent":["\nimport request  from '../../utils/request'\nimport { toast } from \"react-toastify\"\nimport { activityAction } from '../slices/activitySlice';\n\n\n// get activities\nexport function fetchActiviy(){\n    return async(dispatch)=>{\n        try{\n\n        const {data}=await request.get(`api/activities`);\n        dispatch(activityAction.setActivities(data))\n        console.log(data)\n        }catch(error){\n           toast.error(error.response.data.message)\n      \n        }\n\n    }\n}\n\n//get activity count \nexport function getActivitiesCount(){\n    return async(dispatch)=>{\n        try{\n\n        const {data}=await request.get(`api/activites/admin/count`);\n        dispatch(activityAction.setActivityCount(data))\n        }catch(error){\n           toast.error(error.response.data.message)\n      \n        }\n\n    }\n}\n\n//create activity\nexport function createAcivity(newActivity){\n    return async(dispatch , getState)=>{\n        try{\n        dispatch(activityAction.setLoading())\n        await request.post(`api/activities/admin` , newActivity,{\n            headers:{\n                Authorization: \"Bearer \" + getState().auth.admin.data.token,\n                \"Content-Type\":\"multipart/form-data\"\n            } \n        });\n        dispatch(activityAction.setIsActivityCreated())//put it ro true\n        dispatch(fetchActiviy());\n        toast.success(\"activity created successfully\")\n        // after 2 seconsd we set it to false to return to the page\n        setTimeout(()=>dispatch(activityAction.clearIsActivityCreated()),2000)//2 second\n        }catch(error){\n            console.log(error)\n            dispatch(activityAction.clearLoading())\n          toast.error(error.response.data.message)\n      \n        }\n\n    }\n}\n\n//update activity picture \nexport function updateActivityPicture(newImage,ActivityId){\n    return async(dispatch ,getState)=>{\n        try{\n      \n    await request.put(`/api/activities/admin/update-image/${ActivityId}` , newImage,{\n            headers:{\n                Authorization: \"Bearer \" + getState().auth.admin.data.token,\n                \"Content-Type\":\"multipart/form-data\"\n            } \n        });\n       toast.success(\"new activity image uploaded successfully\")\n        }catch(error){\n         toast.error(error.response.data.message)\n        }\n\n    }\n}\n\n\n\n//update activity\nexport function updateActivity(newActivity,ActivitytId){\n    return async(dispatch , getState)=>{\n        try{\n      \n  const {data}=  await request.put(`api/activities/admin/${ActivitytId}` , newActivity,{\n            headers:{\n                Authorization: \"Bearer \" + getState().auth.admin.data.token,  \n            } \n        });\n        dispatch(activityAction.setActivity(data))\n        dispatch(fetchActiviy());\n        toast.success(\"activity updated successfully\")\n        }catch(error){\n        toast.error(error.response.data.message)\n        \n        }\n\n    }\n}\n\n\n//delete activity\nexport function deleteActiivty(ActivityId){\n    return async(dispatch , getState)=>{\n        try{\n      \n  const {data}=  await request.delete(`api/activities/admin/${ActivityId}`,{\n            headers:{\n                Authorization: \"Bearer \" + getState().auth.admin.data.token,\n              \n            } \n        });\n        dispatch(activityAction.deleteActivity(data.ActivityId))\n        dispatch(fetchActiviy());\n        toast.success(\"activity deleted successfully\")\n        }catch(error){\n        toast.error(error.response.data.message)\n        console.log(error)\n        \n        }\n\n    }\n}\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}